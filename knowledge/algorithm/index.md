# 思考法（アルゴリズム）

## 概要

状況判断のためのアルゴリズム。定跡を「なぜ有効か」理解し、状況に応じて判断するための思考法。

**目的**:
- 定跡に盲従しない
- 定跡外しに対応できる
- 相手の行動の意図を読む

---

## 基本アルゴリズム

```
入力: 盤面状態（生存者、CO状況、発言ログ、自分の役職）

処理:
1. 状況認識
2. 選択肢列挙
3. 各選択肢の評価
4. 相手の読み
5. 最適選択

出力: 行動（発言、投票、夜行動）
```

---

## ステップ1: 状況認識

### 確認すべき情報

| 項目 | 内容 |
|------|------|
| 生存者 | 誰が生きているか |
| 死亡者 | 誰が死んだか（処刑 or 襲撃） |
| CO状況 | 誰が何をCOしているか |
| 占い結果 | 誰が誰に白/黒を出したか |
| 発言ログ | 誰が誰を疑っている/擁護しているか |
| 投票履歴 | 誰が誰に投票したか |

### 盤面の数え方

```
村人陣営の勝利条件: 人狼を全員処刑
人狼陣営の勝利条件: 村人 ≦ 人狼（同数以下）

現在の盤面:
- 村人陣営: X人（村人 + 占い師 + 騎士 + 狂人）
- 人狼陣営: Y人（人狼のみ）
- 狂人は村人としてカウントされるが、人狼陣営

あと何回処刑/襲撃で決着がつくか？
```

---

## ステップ2: 選択肢列挙

### 発言フェーズの選択肢

| 選択肢 | 説明 |
|--------|------|
| CO | 役職を宣言する（真/偽） |
| 擁護 | 誰かを村側として支持 |
| 疑い | 誰かを人狼側として追及 |
| 質問 | 情報を引き出す |
| 沈黙 | 目立たないようにする |

### 投票フェーズの選択肢

| 選択肢 | 説明 |
|--------|------|
| 疑っている人に投票 | 自分の読みに従う |
| 多数派に合わせる | 処刑を成立させる |
| 票を割る | 処刑を阻止する |

### 夜行動の選択肢

| 役職 | 選択肢 |
|------|--------|
| 占い師 | 誰を占うか（グレー、疑い先、擁護先） |
| 人狼 | 誰を襲撃するか（占い師、確定白、脅威） |
| 騎士 | 誰を護衛するか（占い師、確定白） |

---

## ステップ3: 各選択肢の評価

### 評価の軸

| 軸 | 質問 |
|----|------|
| 勝率 | この行動で自陣営の勝率は上がるか？ |
| リスク | この行動で自分が吊られる/噛まれるリスクは？ |
| 情報 | この行動で得られる/失う情報は？ |
| 印象 | この行動で他プレイヤーからどう見られるか？ |

### 役職別の評価基準

**村人陣営**:
- 人狼を特定できるか？
- 人狼を処刑に持ち込めるか？
- 自分が生き残れるか？（優先度低）

**人狼陣営**:
- 処刑を回避できるか？
- 村人を処刑に誘導できるか？
- 狂人と連携できるか？

**狂人**:
- 人狼陣営が勝てるか？（自分の生存は二の次）
- 村を混乱させられるか？
- 人狼をサポートできるか？

---

## ステップ4: 相手の読み

### 行動から役職を推測

| 行動 | 推測 |
|------|------|
| 占いCO | 真占い師 or 人狼 or 狂人 |
| 特定の人を擁護 | 仲間？ or 単なる読み？ |
| 特定の人を追及 | 敵対関係？ or ライン切り？ |

### 「なぜその行動を取ったか」を考える

```
例: リナがタケシを擁護している

可能性1: リナは村人で、タケシを真占いと信じている
可能性2: リナは狂人で、タケシが人狼だと思ってサポート
可能性3: リナは狂人で、タケシが真かどうか分からないが混乱させたい
可能性4: リナは人狼で、タケシ（狂人）と連携している

どの可能性が高いか？
→ リナの擁護の根拠を見る
→ 根拠が薄いなら、村人ではなさそう
→ 狂人 or 人狼の可能性が高い
```

### 定跡を知っている前提での読み

```
例: 人狼が占いCOした

村人の読み:
「占いCO者の中に人狼がいる可能性」
「狂人が追従して3COになる可能性」
「2COのままなら、どちらかが人狼 or 狂人」

人狼の読み:
「村人は定跡を知っているので、3COを警戒する」
「あえて3COにせず、2COで真偽勝負する選択肢もある」
```

---

## ステップ5: 最適選択

### 意思決定のフレームワーク

```
各選択肢について:
  期待勝率 = Σ（シナリオの確率 × そのシナリオでの勝率）

最も期待勝率が高い選択肢を選ぶ
```

### 不確実性への対処

| 状況 | 対処 |
|------|------|
| 情報が足りない | 情報を得る行動を優先（質問、占い） |
| 読みが複数ある | 最悪ケースでも許容できる選択肢を選ぶ |
| 時間がない（最終日等） | リスクを取って勝負する |

---

## 役職別の思考パターン

### 占い師の思考

```
1. 占い結果を持っている
2. COすべきか？
   - 白結果 → 即COで村に情報提供
   - 黒結果 → 即COで処刑に持ち込む
3. 対抗が出たら？
   - 対抗は人狼 or 狂人
   - 自分の結果と照合して矛盾を突く
4. 夜の占い先は？
   - グレー（未確定）を優先
   - 疑っている人を確認
```

### 人狼の思考

```
1. 自分の正体を隠す
2. COすべきか？
   - 占いCO → 狂人の追従を期待、ただしリスク
   - 潜伏 → 安全だが狂人連携が難しい
3. 誰を吊らせるか？
   - 真占い師を優先
   - 無理なら村人を
4. 夜の襲撃先は？
   - 情報源（占い師）を消す
   - 確定白を消す
   - 脅威（自分を疑っている人）を消す
```

### 狂人の思考

```
1. 人狼が誰か分からない
2. どうやって人狼をサポートするか？
   - 占いCO → 真占いの信用を落とす
   - 擁護 → 人狼っぽい人を守る（ただし特定困難）
3. 自分の生存は二の次
   - 吊られても人狼が勝てばOK
   - 占い師として処刑されても、真占いを道連れにできればOK
4. 投票先の判断
   - グレー投票は人狼を吊るリスク（game-002）
   - 占いローラーを推す方が安全
```

### 村人の思考

```
1. 自分は村人という確定情報がある
2. この確定情報から何が分かるか？
   - 自分以外に村人がX人いる
   - 自分を白出しした占い師は、少なくとも自分については正しい
3. 誰が人狼か？
   - 発言の矛盾を探す
   - 擁護/疑いのラインを見る
   - 投票行動を見る
4. 多数派を作れるか？
   - 他の村人と協力して人狼を処刑する
```

---

## 更新履歴

- 2026-01-23: 初版作成（game-001〜003の事例と議論から抽出）
